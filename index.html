<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>CV + Chatbot - Brisa Del Milagros López</title>

<!-- jsPDF CDN para generar PDF en cliente -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<style>
  :root{
    --bg:#f3f7fb; --card:#ffffff; --accent:#0066cc; --muted:#6b7280;
    --dark-bg:#0f1720; --dark-card:#111827; --dark-muted:#9ca3af;
  }
  body{font-family:Inter,system-ui,Segoe UI,Arial;margin:0;background:linear-gradient(180deg,#e9f0fb 0%,var(--bg) 100%);min-height:100vh;display:flex;align-items:center;justify-content:center;padding:18px;transition:background .3s,color .3s}
  .app{width:100%;max-width:1100px;background:var(--card);box-shadow:0 10px 30px rgba(2,6,23,0.08);border-radius:14px;overflow:hidden;display:grid;grid-template-columns:420px 1fr;min-height:640px;}
  @media (max-width:980px){.app{grid-template-columns:1fr;}}
  .left{padding:22px;display:flex;flex-direction:column;gap:12px;background:linear-gradient(180deg,#fff, #fbfdff)}
  .avatar{width:120px;height:120px;border-radius:12px;background:#eee;object-fit:cover}
  h1{margin:0;font-size:20px}
  p.lead{margin:0;color:var(--muted)}
  .section{margin-top:6px}
  .skills{display:flex;flex-wrap:wrap;gap:8px}
  .badge{background:#f1f5f9;padding:6px 10px;border-radius:999px;font-size:13px;color:#023047;border:1px solid rgba(0,0,0,0.03)}
  .portfolio{display:grid;grid-template-columns:1fr 1fr;gap:8px;margin-top:8px}
  .portfolio img{width:100%;height:80px;object-fit:cover;border-radius:8px}
  .right{padding:18px;display:flex;flex-direction:column;gap:12px;background:linear-gradient(180deg,#f7fbff,#ffffff);border-left:1px solid #eef3fb}
  .messages{flex:1;overflow:auto;padding:10px;border-radius:10px;background:linear-gradient(180deg,#f8fbff,white);box-shadow:inset 0 1px 0 rgba(0,0,0,0.03)}
  .msg{margin:10px 0;display:flex;gap:10px}
  .bot .bubble{background:#eef6ff;border:1px solid rgba(0,102,204,0.06);color:#032a4d}
  .user .bubble{background:linear-gradient(90deg,#0066cc,#00a3ff);color:white}
  .bubble{padding:10px 12px;border-radius:12px;max-width:78%;line-height:1.3}
  .controls{display:flex;gap:8px;align-items:center}
  input#entrada{flex:1;padding:10px;border-radius:8px;border:1px solid #e6eef9}
  .btn{background:var(--accent);color:white;padding:8px 12px;border-radius:10px;border:0;cursor:pointer}
  .chip{background:#f1f5f9;padding:6px 10px;border-radius:999px;font-size:13px;color:#023047;cursor:pointer;border:1px solid rgba(0,0,0,0.03)}
  .topbar{display:flex;justify-content:space-between;align-items:center;gap:10px}
  .controls-right{display:flex;gap:8px;align-items:center}
  .small{font-size:13px;color:var(--muted)}
  .theme-toggle, .lang-toggle{padding:6px 10px;border-radius:8px;background:#eef3fb;border:0;cursor:pointer}
  .download-btn{background:#0b8454}
  .settings{display:flex;gap:6px;align-items:center}
  .micro{background:#ef4444}
  footer{font-size:12px;color:var(--muted);text-align:center;padding:8px}
  /* Dark mode */
  body.dark{background:linear-gradient(180deg,#071029 0%, #081226 100%);color:#e6eef7}
  body.dark .app{background:var(--dark-card)}
  body.dark .left{background:linear-gradient(180deg,#0b1220,#07101a)}
  body.dark .right{background:linear-gradient(180deg,#07101a,#0b1220);border-left:1px solid #0f1720}
  body.dark .badge{background:#14202b;color:#cfe8ff}
  body.dark .chip{background:#0b1220;color:#bfe8ff;border:1px solid rgba(255,255,255,0.03)}
  body.dark input#entrada{background:#0b1220;color:#cfe8ff;border:1px solid #143245}
  .controls button{min-width:44px}
</style>
</head>
<body>
  <div class="app" id="app">
    <div class="left">
      <div style="display:flex;gap:12px;align-items:center">
        <img id="avatar" class="avatar" src="IMG-20250910-WA0039 - Editado.png" alt="avatar">
        <div>
          <h1 id="name">Brisa Del Milagros López</h1>
          <p class="lead">📍 José María Eguiluz 540 · ✉️ lopezbrisadelmilagro@gmail.com</p>
          <p class="small">🎂 27 años</p>
        </div>
      </div>

      <div class="section">
        <h3>🧾 Perfil</h3>
        <p>Persona responsable, con experiencia en atención al público, ventas y servicios de limpieza. Buena disposición, prolijidad y trabajo en equipo.</p>
      </div>

      <div class="section">
        <h3>🎓 Formación</h3>
        <div class="small">🏫 Primario: Escuela De Las Américas</div>
        <div class="small">🏫 Secundario: Hnas Dominicas De San José</div>
      </div>

      <div class="section">
        <h3>💼 Experiencia</h3>
        <ul>
          <li>👗 Locales de ropa – Atención al cliente, caja y reposición.</li>
          <li>🏪 Kiosco – Ventas y reposición.</li>
          <li>🍹 Bares – Servicio en sala y atención.</li>
          <li>🧹 Empresa de limpieza (Actual) – Limpieza y mantenimiento.</li>
        </ul>
      </div>

      <div class="section">
        <h3>🛠 Habilidades</h3>
        <div class="skills" id="skills">
          <div class="badge">🤝 Atención al cliente</div>
          <div class="badge">💻 Office básico</div>
          <div class="badge">⏱️ Puntualidad</div>
          <div class="badge">📦 Reposición</div>
          <div class="badge">🧽 Limpieza</div>
        </div>
      </div>

      <div class="section">
        <h3>🖼 Mini portfolio</h3>
        <div class  <img src="IMG-20250910-WA0039 - Editado.png" alt="Trabajo 1">   
        <div class  <img src="IMG-20250910-WA0039 - Editado.png" alt="Trabajo 1">          
        </div>
      </div>

      <div class="section">
        <h3>📥 Descargas</h3>
        <div style="display:flex;gap:8px">
          <button class="btn download-btn" id="downloadCV">Descargar CV (PDF)</button>
          <button class="btn" id="downloadLetter">Descargar Carta</button>
        </div>
      </div>

      <div class="section small">
        <div>⚠️ Nota: Si querés una voz igual a la tuya, se necesita tu consentimiento y usar un servicio externo de clonación de voz.</div>
      </div>
    </div>

    <div class="right">
      <div class="topbar">
        <div class="settings">
          <button class="theme-toggle" id="themeBtn">🌙</button>
          <button class="lang-toggle" id="langBtn">ES/EN</button>
        </div>
        <div class="controls-right">
          <select id="voiceSelect" style="padding:6px;border-radius:6px">
            <option value="">Voz (auto)</option>
          </select>
          <label class="small">Vel</label>
          <input id="rate" type="range" min="0.5" max="1.6" step="0.1" value="1">
        </div>
      </div>

      <div class="messages" id="messages">
        <!-- mensajes aparecerán aquí -->
      </div>

      <div style="display:flex;gap:8px;align-items:center">
        <div class="controls" style="flex:1">
          <input id="entrada" placeholder="Escribí una pregunta o usá las sugerencias..." />
          <button class="btn" onclick="sendMessage()">Enviar</button>
        </div>
        <div style="display:flex;gap:6px">
          <button class="chip" onclick="startListening()">🎤</button>
          <button class="chip" onclick="startPractice()">🧑‍🏫 Practicar entrevista</button>
        </div>
      </div>

      <div style="margin-top:10px;display:flex;gap:8px;flex-wrap:wrap">
        <div class="chip" onclick="askQuick('Contame tu experiencia laboral')">📋 Experiencia</div>
        <div class="chip" onclick="askQuick('Qué habilidades tenés')">🛠 Habilidades</div>
        <div class="chip" onclick="askQuick('Disponibilidad')">⏰ Disponibilidad</div>
        <div class="chip" onclick="askQuick('Por qué querés el puesto')">🎯 Motivación</div>
        <div class="chip" onclick="askQuick('Tenés referencias')">📞 Referencias</div>
      </div>

      <footer>Chatbot demo · CV interactivo · Brisa Del Milagros López</footer>
    </div>
  </div>

<script>
/* ====== Datos del CV (se usan para respuestas dinámicas) ====== */
const profile = {
  name: "Brisa Del Milagros López",
  age: "27 años",
  address: "José María Eguiluz 540",
  email: "lopezbrisadelmilagro@gmail.com",
  education: [
    "Primario: Escuela De Las Américas",
    "Secundario: Hnas Dominicas De San José"
  ],
  experience: [
    "Locales de ropa – Atención al cliente, caja y reposición",
    "Kiosco – Ventas y reposición",
    "Bares – Servicio de sala",
    "Empresa de limpieza (Actual) – Limpieza y mantenimiento"
  ],
  skills: [
    "Atención al cliente",
    "Office básico",
    "Puntualidad",
    "Reposición",
    "Limpieza y mantenimiento"
  ],
  letter: `Córdoba, [Fecha]

Estimados/as,

Me dirijo a ustedes para expresar mi interés en formar parte de su equipo. Mi nombre es Brisa Del Milagros López. Cuento con experiencia en atención al público en locales de ropa, kioscos, bares y actualmente desempeño tareas en una empresa de limpieza. Me caracterizo por mi responsabilidad, organización y predisposición para el trabajo en equipo.

Estoy a disposición para una entrevista personal y ampliar cualquier información que necesiten.

Atentamente,
Brisa Del Milagros López
📧 lopezbrisadelmilagro@gmail.com`
};

/* ====== Utilidades DOM ====== */
const messagesEl = document.getElementById('messages');
const entrada = document.getElementById('entrada');

/* ====== Voz (Web Speech API) ====== */
let synth = window.speechSynthesis;
let voices = [];
let currentLang = 'es';
let selectedVoiceName = '';
function populateVoices(){
  voices = synth.getVoices() || [];
  const sel = document.getElementById('voiceSelect');
  sel.innerHTML = '<option value="">Voz (auto)</option>';
  voices.forEach(v=>{
    const opt = document.createElement('option');
    opt.value = v.name;
    opt.textContent = `${v.name} (${v.lang})`;
    sel.appendChild(opt);
  });
}
if (speechSynthesis){
  populateVoices();
  speechSynthesis.onvoiceschanged = populateVoices;
}
document.getElementById('voiceSelect').addEventListener('change', e=>{
  selectedVoiceName = e.target.value;
});

function speak(text){
  if(!('speechSynthesis' in window)) return;
  const u = new SpeechSynthesisUtterance(text);
  u.lang = currentLang === 'es' ? 'es-ES' : 'en-US';
  u.rate = parseFloat(document.getElementById('rate').value) || 1;
  if (selectedVoiceName){
    const v = voices.find(x=>x.name===selectedVoiceName);
    if (v) u.voice = v;
  }
  synth.cancel();
  synth.speak(u);
}

/* ====== Mostrar mensajes ====== */
function addMessage(text, who='bot'){
  const div = document.createElement('div');
  div.className = 'msg ' + (who==='bot' ? 'bot' : 'user');
  const bubble = document.createElement('div');
  bubble.className = 'bubble ' + (who==='bot' ? 'bot' : 'user');
  bubble.innerText = text;
  div.appendChild(bubble);
  messagesEl.appendChild(div);
  messagesEl.scrollTop = messagesEl.scrollHeight;
}

/* ====== Lógica de respuestas simples ====== */
function generateResponse(text){
  const t = text.toLowerCase();

  // respuestas a preguntas directas usando campos del profile
  if (t.includes('experiencia') || t.includes('trabajo') || t.includes('empleo')){
    return `Tengo experiencia en: ${profile.experience.join('; ')}.`;
  }
  if (t.includes('habilidad') || t.includes('habilidades') || t.includes('skills')){
    return `Mis habilidades: ${profile.skills.join(', ')}.`;
  }
  if (t.includes('contacto') || t.includes('@') || t.includes('email') || t.includes('tel')){
    return `Podés contactarme por email: ${profile.email} o presentarte en: ${profile.address}.`;
  }
  if (t.includes('edad') || t.includes('años')){
    return `Tengo ${profile.age}.`;
  }
  if (t.includes('estudios') || t.includes('formación') || t.includes('primario') || t.includes('secundario')){
    return `Mi formación: ${profile.education.join(' / ')}.`;
  }
  if (t.includes('carta') || t.includes('presentación')){
    return profile.letter;
  }
  if (t.includes('por qué') || t.includes('motiva') || t.includes('puesto')){
    return `Me motiva trabajar por la posibilidad de aprender, aportar y hacerlo con responsabilidad. Tengo experiencia con atención al público y mantenimiento.`;
  }
  if (t.includes('referencia')|| t.includes('referencias')){
    return `Puedo dar referencias laborales de los lugares donde trabajé si lo requieren.`;
  }
  if (t.includes('disponibilidad') || t.includes('horario')){
    return `Tengo disponibilidad part-time/full-time según lo conversado.`;
  }

  // fallback: frases genericas
  const fallbacks = [
    "Perdón, ¿podés reformular la pregunta?",
    "Interesante pregunta. Podés pedirme que muestre mi CV o mi carta (botones de la izquierda).",
    "Puedo contarte mi experiencia, habilidades o enviarte mi carta. ¿Qué te interesa?"
  ];
  return fallbacks[Math.floor(Math.random()*fallbacks.length)];
}

/* ====== Envío de mensajes ====== */
function sendMessage(){
  const text = entrada.value.trim();
  if (!text) return;
  addMessage(text,'user');
  entrada.value = '';
  setTimeout(()=>{
    const resp = generateResponse(text);
    addMessage(resp,'bot');
    speak(resp);
  }, 600);
}

/* ====== Sugerencias rápidas ====== */
function askQuick(q){
  entrada.value = q;
  sendMessage();
}

/* ====== Reconocimiento de voz (Webkit) ====== */
function startListening(){
  if (!('webkitSpeechRecognition' in window) && !('SpeechRecognition' in window)){
    alert('Este navegador no soporta reconocimiento de voz. Usá Chrome o Edge.');
    return;
  }
  const Recognition = window.SpeechRecognition || window.webkitSpeechRecognition;
  const rec = new Recognition();
  rec.lang = currentLang === 'es' ? 'es-ES' : 'en-US';
  rec.start();
  rec.onresult = (ev)=>{
    const txt = ev.results[0][0].transcript;
    addMessage(txt,'user');
    const resp = generateResponse(txt);
    setTimeout(()=>{ addMessage(resp,'bot'); speak(resp); }, 600);
  };
}

/* ====== Práctica de entrevista (secuencia) ====== */
const interviewQuestions = [
  {es:"Contame brevemente tu experiencia laboral.", en:"Tell me briefly about your work experience."},
  {es:"¿Por qué querés trabajar con nosotros?", en:"Why do you want to work with us?"},
  {es:"Contame una fortaleza y una debilidad.", en:"Tell me one strength and one weakness."},
  {es:"¿Tenés disponibilidad para comenzar?", en:"Are you available to start soon?"},
  {es:"¿Querés agregar algo más para completar tu presentación?", en:"Would you like to add anything else to your presentation?"}
];
let interviewIndex = 0;
function startPractice(){
  interviewIndex = 0;
  nextInterview();
}
function nextInterview(){
  if (interviewIndex >= interviewQuestions.length){
    const endMsg = currentLang==='es' ? "¡Excelente práctica! ¿Querés repetirla o descargar tu carta para repasar?" : "Great practice! Want to repeat or download your cover letter to review?";
    addMessage(endMsg,'bot'); speak(endMsg);
    return;
  }
  const q = interviewQuestions[interviewIndex];
  const text = currentLang==='es' ? q.es : q.en;
  addMessage(text,'bot'); speak(text);
  interviewIndex++;
  // espera a respuesta del usuario (pueden usar mic o escribir). luego se puede llamar nextInterview() manualmente
}

/* ====== Descargar CV / Carta en PDF (jsPDF) ====== */
async function downloadPDF(filename, title, bodyLines){
  const { jsPDF } = window.jspdf;
  const doc = new jsPDF();
  doc.setFontSize(16);
  doc.text(title, 14, 20);
  doc.setFontSize(11);
  let y = 30;
  for (const line of bodyLines){
    const split = doc.splitTextToSize(line, 180);
    doc.text(split, 14, y);
    y += (split.length * 7) + 4;
    if (y > 270){ doc.addPage(); y = 20; }
  }
  doc.save(filename);
}

document.getElementById('downloadCV').addEventListener('click', ()=>{
  const lines = [
    `${profile.name} · ${profile.age}`,
    `Dirección: ${profile.address}`,
    `Email: ${profile.email}`,
    '',
    'Perfil:',
    'Persona responsable con experiencia en atención al público y servicios de limpieza.',
    '',
    'Formación:',
    ...profile.education,
    '',
    'Experiencia:',
    ...profile.experience,
    '',
    'Habilidades:',
    ...profile.skills
  ];
  downloadPDF('CV_Brisa_Lopez.pdf','Currículum Vitae - ' + profile.name, lines);
});

document.getElementById('downloadLetter').addEventListener('click', ()=>{
  const lines = profile.letter.split('\n');
  downloadPDF('Carta_Presentacion_Brisa_Lopez.pdf','Carta de Presentación - ' + profile.name, lines);
});

/* ====== Tema y idioma toggles ====== */
document.getElementById('themeBtn').addEventListener('click', ()=>{
  document.body.classList.toggle('dark');
});
document.getElementById('langBtn').addEventListener('click', ()=>{
  currentLang = currentLang === 'es' ? 'en' : 'es';
  const notice = currentLang==='es' ? 'Idioma cambiado a Español' : 'Language switched to English';
  addMessage(notice,'bot'); speak(notice);
});

/* ====== Presentación automática inicial ====== */
window.addEventListener('load', ()=>{
  setTimeout(()=>{
    addMessage(`👋 ¡Hola! Soy el asistente virtual de ${profile.name}. Podés preguntarme sobre su experiencia, formación, habilidades o pedir la carta de presentación.`, 'bot');
    speak(`Hola, soy el asistente virtual de ${profile.name}. Puedes preguntarme sobre su experiencia, formación, habilidades o pedir la carta de presentación.`);
  },700);
});
</script>
</body>
</html>
